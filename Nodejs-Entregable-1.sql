CREATE DATABASE entregable1;

CREATE TABLE "users" (
  "user_id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(130) NOT NULL,
  "email" varchar(50) UNIQUE NOT NULL,
  "password" varchar(10) NOT NULL,
  "age" int NOT NULL
);

CREATE TABLE "users_registers" (
  "id_registers" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "user_id" int NOT NULL,
  "id_role" int NOT NULL,
  "id_course" int
);

CREATE TABLE "courses" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" varchar(50) NOT NULL,
  "description" varchar(200) NOT NULL,
  "level" int NOT NULL,
  "teacher" int,
  "id_category" int NOT NULL
);

CREATE TABLE "courses_videos" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_video" int NOT NULL,
  "id_course" int NOT NULL
);

CREATE TABLE "videos" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" varchar(100) NOT NULL,
  "url" varchar(150) UNIQUE NOT NULL
);

CREATE TABLE "categories" (
  "id_category" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(100) NOT NULL
);

CREATE TABLE "levels" (
  "id_level" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "level" varchar(50) NOT NULL
);

CREATE TABLE "roles" (
  "id_role" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "role" varchar NOT NULL
);

CREATE TABLE "teacher" (
  "id_teacher" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_user" int NOT NULL
);

ALTER TABLE "teacher" ADD FOREIGN KEY ("id_user") REFERENCES "users" ("user_id");

ALTER TABLE "courses" ADD FOREIGN KEY ("id_category") REFERENCES "categories" ("id_category");

ALTER TABLE "courses" ADD FOREIGN KEY ("teacher") REFERENCES "teacher" ("id_teacher");

ALTER TABLE "courses_videos" ADD FOREIGN KEY ("id_course") REFERENCES "courses" ("id");

ALTER TABLE "courses" ADD FOREIGN KEY ("level") REFERENCES "levels" ("id_level");

ALTER TABLE "users_registers" ADD FOREIGN KEY ("user_id") REFERENCES "users" ("user_id");

ALTER TABLE "users_registers" ADD FOREIGN KEY ("id_role") REFERENCES "roles" ("id_role");

ALTER TABLE "users_registers" ADD FOREIGN KEY ("id_course") REFERENCES "courses" ("id");

ALTER TABLE "courses_videos" ADD FOREIGN KEY ("id_video") REFERENCES "videos" ("id");


INSERT INTO "categories" ("id_category", "name") VALUES (1, 'JavaScript'),(2, 'React');
INSERT INTO "levels" ("id_level", "level") VALUES (1, 'Begginer'), (2, 'Intermediate'), (3, 'Advanced');
INSERT INTO "roles" ("id_role", "role") VALUES (1, 'Student'), (2, 'Teacher'), (3, 'Admin');
INSERT INTO "users" ("user_id", "name", "email", "password", "age") VALUES ('1', 'Giovany Andrés Molina Tique', 'andresg@gmail.com', 'passÑor', '30'), ('2', 'Ian Rosas', 'ian_rosas@academlo.com', 'P@sshord', '34'), ('3', 'Brenda Gonzales', 'brenda_gonzales', 'brendaG', '35'), ('4', 'Laura Riaños', 'lauris@gmail.com', 'passwLau', '24');
INSERT INTO "teacher" ("id_teacher", "id_user") VALUES (1, 2), (2, 3);
INSERT INTO "courses" ("id", "title", "description", "level", "teacher", "id_category") VALUES ('1', 'JavaScript', 'En este curso encontraras los fundamentos de JavaScript', '1', '2', '1'), ('2', 'React', 'Fundamentos de React', '2', '2', '2');
INSERT INTO "videos" ("id", "title", "url") VALUES ('1', 'Fundamentos de JavaScript', 'https://class-center.academlo.com/grupos/9b9b6e22-9aef-4c38-88c7-1c36d29d1e06/task/dada0fc44df-6b4e-4b05-a585-1305da36212a'), ('2', 'Ejercicios con JavaScript', 'https://class-center.academlo.com/grupos/3e196461-9e1b-4253-ac12-8a67a9901b2fra');
INSERT INTO "videos" ("id", "title", "url") VALUES ('3', 'Fundamentos React', 'https://class-center.academlo.com/grupos/9b9b6e22-9aef-4c38-88c7-1c36d29d1e06/task/a0fc44df-6bdad4e-4b05-a585-1305da36212ab'), ('4', 'Ejercicios de React', 'https://class-center.academlo.com/grupos/9b9b6e22-9aef-4c38-88c7-1c36d29d1e06/task/6a29effc-e6c5-4fa1-b23a-f5628c03c1afbfa');
INSERT INTO "users_registers" ("id_registers", "user_id", "id_role", "id_course") VALUES ('1', '1', '1', '1'), ('2', '2', '2', '2'), ('3', '3', '2', '1'), ('4', '4', '3', NULL);
